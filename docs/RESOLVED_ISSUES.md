# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–µ—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ MCP UI Playground Chat.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### 1. –ò–ò –Ω–µ –≤–∏–¥–µ–ª MCP —Å–µ—Ä–≤–µ—Ä—ã

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–µ—Ä–≤–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–∞–ª–∏—Å—å –∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Å—Ç–∞—Ç—É—Å "connected"
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: `MCP tools from server: ['tool1', 'tool2']`
- –ù–æ –ò–ò –æ—Ç–≤–µ—á–∞–ª "—É –º–µ–Ω—è –Ω–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤"

**–ü—Ä–∏—á–∏–Ω–∞:**
`mcpServersForApi` –Ω–µ –±—ã–ª —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º - –≤—ã—á–∏—Å–ª—è–ª—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `lib/context/mcp-context.tsx:260`:**

```typescript
// –ë–´–õ–û:
const mcpServersForApi = getActiveServersForApi();

// –°–¢–ê–õ–û:
const mcpServersForApi = useMemo(() => getActiveServersForApi(), [selectedMcpServers, mcpServers]);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ò–ò —Ç–µ–ø–µ—Ä—å –≤–∏–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ Chat API

### 2. –ß–∞—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –∏ –ø–æ–ª—É—á–∞–ª–∏—Å—å
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —á–∞—Ç—ã –∏—Å—á–µ–∑–∞–ª–∏
- API `/api/chats` –≤–æ–∑–≤—Ä–∞—â–∞–ª –æ—à–∏–±–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞ 1:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `lib/db/index.ts`:**

```typescript
// –ë–´–õ–û:
import { drizzle } from "drizzle-orm/neon-serverless";
import { Pool } from "@neondatabase/serverless";

// –°–¢–ê–õ–û:
import { drizzle } from "drizzle-orm/node-postgres";
import { Pool } from "pg";
```

**–ü—Ä–∏—á–∏–Ω–∞ 2:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ API

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `app/api/chat/route.ts:97`:**

```typescript
// –î–û–ë–ê–í–õ–ï–ù–û:
async onFinish({ messages: finalMessages }) {
  // Save the conversation to database
  try {
    await saveChat({
      id,
      userId,
      messages: finalMessages,
    });
    console.log(`Chat saved with ID: ${id}`);
  } catch (error) {
    console.error('Error saving chat:', error);
  }
  await cleanup();
}
```

**–ü—Ä–∏—á–∏–Ω–∞ 3:** –û—Ç–∫–ª—é—á–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `components/chat.tsx:53`:**

```typescript
// –†–ê–°–ö–û–ú–ú–ï–ù–¢–ò–†–û–í–ê–ù–û –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
const { data: chatData } = useQuery({
  queryKey: ['chat', chatId, userId] as const,
  queryFn: async () => {
    const response = await fetch(`/api/chats/${chatId}`, {
      headers: { 'x-user-id': userId }
    });
    return response.json();
  },
  enabled: !!chatId && !!userId,
});

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç AI SDK
const initialMessages = useMemo(() => {
  if (!chatData?.messages) return [];
  
  return chatData.messages.map(msg => ({
    id: msg.id,
    role: msg.role,
    content: msg.parts?.find(p => p.type === 'text')?.text || '',
    parts: msg.parts
  }));
}, [chatData]);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ß–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

## üìã –ü–æ—à–∞–≥–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

1. **–î–æ–±–∞–≤—å—Ç–µ –¥–µ–º–æ —Å–µ—Ä–≤–µ—Ä:**
   - –¢–∏–ø: SSE
   - URL: `https://remote-mcp-server-authless.idosalomon.workers.dev/sse`

2. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   - –ù–∞–∂–º–∏—Ç–µ "Use" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ª–æ–≥–∞—Ö:**
   ```
   MCP tools from https://remote-mcp-server-authless.idosalomon.workers.dev/sse: 
   ['get_tasks_status', 'nudge_team_member', 'show_task_status', 'show_user_status']
   ```

4. **–°–ø—Ä–æ—Å–∏—Ç–µ —É –ò–ò:**
   ```
   –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–µ–±–µ –¥–æ—Å—Ç—É–ø–Ω—ã?
   ```

5. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   –ò–ò –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç MCP —Å–µ—Ä–≤–µ—Ä–∞.

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–∞—Ç–æ–≤

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω–æ–≤–æ–º —á–∞—Ç–µ**

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**
   ```
   Chat saved with ID: chat-id-here
   ```

3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É**

4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ß–∞—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
   - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

### –¢–µ—Å—Ç 3: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —á–∞—Ç**

2. **–î–æ–±–∞–≤—å—Ç–µ MCP —Å–µ—Ä–≤–µ—Ä –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ**

3. **–°–ø—Ä–æ—Å–∏—Ç–µ:**
   ```
   –ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á –∏—Å–ø–æ–ª—å–∑—É—è –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
   ```

4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ò–ò –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `show_task_status`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –¥–∞–Ω–Ω—ã–º–∏
   - –ß–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker ps | grep postgres
docker exec postgres psql -U postgres -c "SELECT COUNT(*) FROM chats;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl -H "x-user-id: test" http://localhost:3001/api/chats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
grep DATABASE_URL .env.local
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
console.log('Selected MCP servers:', 
  JSON.parse(localStorage.getItem('selected-mcp-servers') || '[]'));

console.log('All MCP servers:', 
  JSON.parse(localStorage.getItem('mcp-servers') || '[]'));
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

1. **`/docs/README.md`** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. **`/docs/guides/quick-start.md`** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç
3. **`/docs/guides/mcp-servers.md`** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
4. **`/docs/troubleshooting/common-issues.md`** - –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
5. **`/docs/troubleshooting/mcp-debugging.md`** - –û—Ç–ª–∞–¥–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
6. **`/docs/architecture/mcp-integration.md`** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```
docs/
‚îú‚îÄ‚îÄ README.md                           # –ì–ª–∞–≤–Ω–∞—è —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ guides/
‚îÇ   ‚îú‚îÄ‚îÄ quick-start.md                  # üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îÇ   ‚îî‚îÄ‚îÄ mcp-servers.md                  # üîó MCP —Å–µ—Ä–≤–µ—Ä—ã
‚îú‚îÄ‚îÄ troubleshooting/
‚îÇ   ‚îú‚îÄ‚îÄ common-issues.md                # üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ mcp-debugging.md                # üîß –û—Ç–ª–∞–¥–∫–∞ MCP
‚îî‚îÄ‚îÄ architecture/
    ‚îî‚îÄ‚îÄ mcp-integration.md              # üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```

## ‚ö° –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

- **MCP —Å–µ—Ä–≤–µ—Ä—ã –≤–∏–¥–Ω—ã –ò–ò** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
- **–ß–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** - –≤ PostgreSQL —Å –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π
- **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** - –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —á–∞—Ç–∞
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- **–†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

- **SSE —Å–µ—Ä–≤–µ—Ä—ã** - –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞–º
- **stdio —Å–µ—Ä–≤–µ—Ä—ã** - —á–µ—Ä–µ–∑ Daytona sandbox (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ API –∫–ª—é—á–∞)
- **–î–µ–º–æ —Å–µ—Ä–≤–µ—Ä** - –≥–æ—Ç–æ–≤—ã–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ troubleshooting

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞** - –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ MCP —Å–µ—Ä–≤–µ—Ä—ã
3. **–ò–∑—É—á–µ–Ω–∏–µ** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `/docs/`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã](troubleshooting/common-issues.md)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [–û—Ç–ª–∞–¥–∫—É MCP](troubleshooting/mcp-debugging.md)  
3. –°–æ–±–µ—Ä–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —á–µ–∫–ª–∏—Å—Ç—É
4. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞